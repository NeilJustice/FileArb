cmake_minimum_required(VERSION 3.5)
project(FileArb)
include(${CMAKE_SOURCE_DIR}/CMakeMacros.cmake)

source_group("" FILES FileArbMain.cpp)
include_directories(${CMAKE_SOURCE_DIR})

if(UNIX)
   set(Boost_USE_STATIC_LIBS ON)
   set(BOOST_INCLUDEDIR "/usr/local/include/boost")
   set(BOOST_LIBRARYDIR "/usr/local/lib/boost")
   find_package(Boost 1.75 REQUIRED COMPONENTS regex)
   include_directories(${Boost_INCLUDE_DIRS})
elseif(WIN32)
   include_directories("${CMAKE_SOURCE_DIR}/BoostRegex/Windows/include")
endif()

if(MSVC)
link_directories(FileArb "${CMAKE_SOURCE_DIR}/BoostRegex/Windows/lib")
endif()
add_executable(FileArb FileArbMain.cpp)

if(UNIX)
   target_link_libraries(FileArb libFileArb Boost::regex)
   set_target_properties(FileArb PROPERTIES OUTPUT_NAME filearb)
elseif(MSVC)
   target_link_libraries(FileArb libFileArb)
endif()

install(TARGETS FileArb DESTINATION "bin")

if(UNIX AND NOT APPLE)
   target_link_libraries(FileArb stdc++fs)
   if(CodeCovMode)
     target_link_libraries(FileArb CodeCovLibraryInterface)
   endif()
endif()
